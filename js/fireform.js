Fireform=function(a,d,c){that=this;this.error=function(i){console.error(i)};var g,h,k,m=c&&c.successClass?c.successClass:"submit-success",f=c&&c.failedClass?c.failedClass:"submit-failed",j=c&&c.formValidationClass?c.formValidationClass:"form-validation-failed",e=c&&c.inputValidationClass?c.inputValidationClass:"input-validation-failed",b=c&&c.simpleValidation?c.simpleValidation:false;that.emailNotification=c&&c.emailNotification?c.emailNotification:undefined;that.emailConfirmationName=c&&c.emailConfirmationName?c.emailConfirmationName:undefined;that.emailConfirmationFrom=c&&c.emailConfirmationFrom?c.emailConfirmationFrom:undefined;that.emailConfirmationSubject=c&&c.emailConfirmationSubject?c.emailConfirmationSubject:undefined;that.emailConfirmationBodyHTML=c&&c.emailConfirmationBodyHTML?c.emailConfirmationBodyHTML:undefined;that.emailConfirmationBodyText=c&&c.emailConfirmationBodyText?c.emailConfirmationBodyText:undefined;that.user=undefined;if(typeof a!=="string"){g=a}else{if(a.search(/^\./)===0){g=document.getElementsByClassName(a.slice(1))[0];console.warn("We will default to the first form matching this class selector")}else{if(a.search(/^\#/)===0){g=document.getElementById(a.slice(1))}else{if(!g){this.error('Please use a Class or Id Selector. This mean your string should begin with a "." or "#".  You man also pass in a Dom elment object');return}}}}if(!g.tagName){this.error("No DOM object found!");return}else{if(g.tagName!=="FORM"){this.error("DOM elments is not a <form>");return}}if(!d||d.length==-0){this.error("No Fireform URL entered");return}this.formDOMObject=g;this.inputs=h=g.elements;for(var n=this.inputs.length-1;n>=0;n--){var l;l=h[n].getAttribute("type");if(l==="submit"){k=h[n];break}}if(!k){this.error('Please add a submit button with a <input type="submit"> attr"');return}this.submitElement=k;this.submit=function(r){var o=true;var u;if(event){event.preventDefault()}else{if(r&&r.preventDefault){event.preventDefault()}}var p={};p._time={};p._time.name="_time";p._time.type="_time";p._time.value=new Date().toString();for(var t=that.inputs.length-1;t>=0;t--){var q,s;q=that.inputs[t].name?h[t].name:"input_"+String(t);s=h[t].type;value=h[t].value;if(h[t].getAttribute("email-confirmation")==="true"||that.emailConfirmationName===q){that.emailConfirmation=value}if(h[t].getAttribute("email-confirmation-from")==="true"){that.emailConfirmationFrom=value}if(h[t].getAttribute("email-confirmation-from")==="true"){that.emailConfirmationFrom=value}if(h[t].getAttribute("email-confirmation-subject")==="true"){that.emailConfirmationSubject=value}if(h[t].getAttribute("email-confirmation-body-html")==="true"){that.emailConfirmationBodyHTML=value}if(h[t].getAttribute("email-confirmation-body-text")==="true"){that.emailConfirmationBodyText=value}if(h[t].getAttribute("email-notification")==="true"&&!that.emailNotification){that.emailNotification=value}if(s==="radio"&&h[t].checked===true){p[q]={};p[q].value=h[t].checked?value:"";p[q].type=h[t].type;p[q].name=h[t].name;u=(h[t].checked||u)?true:false}else{if(s!=="submit"&&s!=="radio"){p[q]={};p[q].value=value;p[q].type=h[t].type;p[q].name=h[t].name;p[q].checked=h[t].checked}}if(s==="radio"&&!u&&b){h[t].className+=" "+e}else{if(s!=="submit"&&value===""&&b){h[t].className+=" "+e,o=false}else{if(b){h[t].className=h[t].className.replace(new RegExp(e,"g"),"")}}}}if((o&&u)||!b){that.submitForm(d,p),g.className=g.className.replace(new RegExp(j,"g"),"")}else{g.className+=" "+j,that.error("Validation Failed. Classname "+j+" Added to inputs")}};this.getRepo=function(o){var r,s,p,r,q,i;if(o.match("fireform.org/publicexample")||o.match("fireform/publicexample")){return"https://fireform.firebaseio.com/example/formPosts.json"}s=o.split("://")[1].split("/list/");p=s[0].split(".org")[0];r=s[1].split("/");q=that.user=r[0];i=that.repo=r[1];return"https://"+p+".firebaseio.com/users/simplelogin:"+q+"/lists/"+i+"/formPosts.json"};this.getEmailRepo=function(o){var r,s,p,r,q,i;if(o.match("fireform.org/publicexample")){return null}s=o.split("://")[1].split("/list/");p=s[0].split(".org")[0];r=s[1].split("/");q=that.user=r[0];i=r[1];return"https://"+p+".firebaseio.com/users/simplelogin:"+q+"/"};this.submitForm=function(q,p){var v=new XMLHttpRequest,u=this.getRepo(q);v.open("POST",u,true);v.setRequestHeader("Content-type","application/x-www-form-urlencoded");v.send(JSON.stringify(p));var w={};w.form=p;payloadText="";payloadHTML="<table>";for(var r in w.form){payloadText+=" \r\n "+r+" : "+w.form[r].value;payloadHTML+=" <tr><td> "+r+" </td> <td>"+w.form[r].value+"</td> </tr>"}payloadText+="</table>";w.fireBaseRepo=q;w.payloadText=payloadText;w.payloadHTML=payloadHTML;w.uid=that.user?"simplelogin:"+that.user:undefined;w.fireFormRepo=that.repo;if(that.emailConfirmation){w.emailConfirmation=that.emailConfirmation?that.emailConfirmation:undefined;w.emailConfirmationFrom=that.emailConfirmationFrom?that.emailConfirmationFrom:"no-reply@"+window.location.host;w.emailConfirmationSubject=that.emailConfirmationSubject?that.emailConfirmationSubject:"Confirming your submition to"+window.location.host;w.emailConfirmationBodyText=that.emailConfirmationBodyText?that.emailConfirmationBodyText:"Thanks for you submition!";w.emailConfirmationBodyHTML=that.emailConfirmationBodyHTML?"<div></div>"+that.emailConfirmationBodyHTML:"<div></div><p>Thanks for your submition!<p>";var t="https://fireform.firebaseio.com/emailQConfirmation.json";var o=new XMLHttpRequest;o.open("POST",t,true);o.setRequestHeader("Content-type","application/x-www-form-urlencoded");o.send(JSON.stringify(w))}if(that.emailNotification){w.emailNotification=that.emailNotification?that.emailNotification:undefined;var i="https://fireform.firebaseio.com/emailQNotification.json";var s=new XMLHttpRequest;s.open("POST",i,true);s.setRequestHeader("Content-type","application/x-www-form-urlencoded");s.send(JSON.stringify(w))}v.onreadystatechange=function(){if(v.readyState==4){g.className+=" "+m;if(!c||!c.disableInput){that.disableInput(that.submitElement)}if(c&&c.callback){c.callback(null,{url:u})}}}};this.disableInput=function(i){var o=document.createAttribute("disabled");o.value="true";i.setAttributeNode(o)};k.onclick=this.submit;return this};